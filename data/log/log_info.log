24-11-26.14:23:05.137 [main            ] INFO  Application            - Starting Application using Java 1.8.0_421 on GUOWEIHONG with PID 34716 (D:\JAVA_Project\bigmarket-14610-gwh\bigmarket-14610-gwh-app\target\classes started by 郭伟鸿 in D:\JAVA_Project\bigmarket-14610-gwh)
24-11-26.14:23:05.139 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-11-26.14:23:06.082 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-26.14:23:06.083 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-26.14:23:06.115 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
24-11-26.14:23:06.654 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8090 (http)
24-11-26.14:23:06.661 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8090"]
24-11-26.14:23:06.662 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-11-26.14:23:06.662 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-11-26.14:23:06.756 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-11-26.14:23:06.756 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1586 ms
24-11-26.14:23:07.057 [main            ] INFO  Version                - Redisson 3.23.4
24-11-26.14:23:07.385 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 124.70.185.116/124.70.185.116:6379
24-11-26.14:23:07.505 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 124.70.185.116/124.70.185.116:6379
24-11-26.14:23:09.061 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-26.14:23:09.138 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8090"]
24-11-26.14:23:09.150 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8090 (http) with context path ''
24-11-26.14:23:09.152 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-26.14:23:09.207 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3fe98084:0/SimpleConnection@1be427b4 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 22583]
24-11-26.14:23:09.279 [main            ] INFO  Application            - Started Application in 4.499 seconds (JVM running for 5.264)
24-11-26.14:23:10.040 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.14:23:10.419 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.14:23:10.507 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.14:23:10.759 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.14:43:03.378 [http-nio-8090-exec-7] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-11-26.14:43:03.383 [http-nio-8090-exec-7] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-11-26.14:43:03.455 [http-nio-8090-exec-7] INFO  DispatcherServlet      - Completed initialization in 72 ms
24-11-26.14:43:03.718 [http-nio-8090-exec-14] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge2 activityId:100301
24-11-26.14:43:03.718 [http-nio-8090-exec-12] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge2 activityId:100301
24-11-26.14:43:03.729 [http-nio-8090-exec-9] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:03.729 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:03.740 [http-nio-8090-exec-14] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.14:43:04.026 [http-nio-8090-exec-14] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.14:43:04.220 [http-nio-8090-exec-8] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge2 orders.size:0
24-11-26.14:43:04.240 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:43:04.245 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.245 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.245 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.245 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.245 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.245 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.245 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.245 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.257 [http-nio-8090-exec-10] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge2 orders.size:0
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.277 [http-nio-8090-exec-9] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.280 [http-nio-8090-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:04.281 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:04.355 [http-nio-8090-exec-15] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:43:04.355 [http-nio-8090-exec-17] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:43:04.356 [http-nio-8090-exec-17] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:43:04.356 [http-nio-8090-exec-15] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:43:04.387 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:43:04.388 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.388 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.388 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.388 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.388 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.388 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.388 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.388 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:04.404 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:04.449 [http-nio-8090-exec-12] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge2 activityId:100301 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.14:43:04.449 [http-nio-8090-exec-14] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge2 activityId:100301 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.14:43:04.454 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:43:04.454 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:43:04.454 [http-nio-8090-exec-9] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:43:04.454 [http-nio-8090-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:43:04.457 [http-nio-8090-exec-18] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:04.458 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:04.485 [http-nio-8090-exec-16] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:xiaofuge2 activityId：100301
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$66df666c.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:43:04.485 [http-nio-8090-exec-18] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:xiaofuge2 activityId：100301
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$66df666c.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:43:25.685 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:null,activityId:0
24-11-26.14:43:25.686 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:null,activityId:0
24-11-26.14:43:25.689 [http-nio-8090-exec-31] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:null,activityId:0
24-11-26.14:43:25.692 [http-nio-8090-exec-27] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:null,activityId:0
24-11-26.14:43:25.715 [http-nio-8090-exec-32] INFO  RaffleActivityController - 查询用户活动账户 userId:null activityId:0
24-11-26.14:43:25.715 [http-nio-8090-exec-30] INFO  RaffleActivityController - 查询用户活动账户 userId:null activityId:0
24-11-26.14:43:25.754 [http-nio-8090-exec-30] INFO  RaffleActivityController - 查询用户活动账户开始 userId:null activityId:0 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.14:43:25.754 [http-nio-8090-exec-32] INFO  RaffleActivityController - 查询用户活动账户开始 userId:null activityId:0 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.14:43:25.759 [http-nio-8090-exec-38] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:null,activityId:0
24-11-26.14:43:25.780 [http-nio-8090-exec-28] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:null orders.size:0
24-11-26.14:43:25.780 [http-nio-8090-exec-38] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:null activityId：0
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$66df666c.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:43:25.785 [http-nio-8090-exec-33] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:null,activityId:0
24-11-26.14:43:25.799 [http-nio-8090-exec-38] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:null orders.size:0
24-11-26.14:43:25.813 [http-nio-8090-exec-33] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:null activityId：0
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$66df666c.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:43:25.827 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:null,activityId:0 userTodayPartakeCount:0
24-11-26.14:43:25.827 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:null,activityId:0 userTodayPartakeCount:0
24-11-26.14:43:25.830 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:null,activityId:0 response:{"code":"0000","data":[],"info":"成功"}
24-11-26.14:43:25.830 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:null,activityId:0 response:{"code":"0000","data":[],"info":"成功"}
24-11-26.14:43:35.729 [http-nio-8090-exec-31] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7255dc5b (Communications link failure

The last packet successfully received from the server was 1,224,472 milliseconds ago. The last packet sent successfully to the server was 1,224,502 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
24-11-26.14:43:35.729 [http-nio-8090-exec-27] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@29709763 (Communications link failure

The last packet successfully received from the server was 1,224,248 milliseconds ago. The last packet sent successfully to the server was 1,224,267 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
24-11-26.14:43:35.853 [http-nio-8090-exec-31] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:null,activityId:0 userTodayPartakeCount:0
24-11-26.14:43:35.853 [http-nio-8090-exec-27] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:null,activityId:0 userTodayPartakeCount:0
24-11-26.14:43:35.854 [http-nio-8090-exec-31] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:null,activityId:0 response:{"code":"0000","data":[],"info":"成功"}
24-11-26.14:43:35.854 [http-nio-8090-exec-27] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:null,activityId:0 response:{"code":"0000","data":[],"info":"成功"}
24-11-26.14:43:49.414 [http-nio-8090-exec-47] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:49.417 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:49.417 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:49.421 [http-nio-8090-exec-44] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:49.470 [http-nio-8090-exec-45] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge2 orders.size:0
24-11-26.14:43:49.470 [http-nio-8090-exec-46] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge2 orders.size:0
24-11-26.14:43:49.471 [http-nio-8090-exec-43] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:43:49.471 [http-nio-8090-exec-43] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:43:49.471 [http-nio-8090-exec-47] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:43:49.472 [http-nio-8090-exec-47] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:43:49.474 [http-nio-8090-exec-34] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge2 activityId:100301
24-11-26.14:43:49.474 [http-nio-8090-exec-48] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:49.493 [http-nio-8090-exec-34] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge2 activityId:100301 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.14:43:49.493 [http-nio-8090-exec-48] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:xiaofuge2 activityId：100301
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$66df666c.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:43:49.496 [http-nio-8090-exec-49] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge2 activityId:100301
24-11-26.14:43:49.497 [http-nio-8090-exec-50] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge2,activityId:100301
24-11-26.14:43:49.517 [http-nio-8090-exec-49] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge2 activityId:100301 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.14:43:49.517 [http-nio-8090-exec-50] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:xiaofuge2 activityId：100301
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$66df666c.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:43:49.518 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.519 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:43:49.525 [http-nio-8090-exec-47] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:43:49.526 [http-nio-8090-exec-47] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.526 [http-nio-8090-exec-47] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.526 [http-nio-8090-exec-47] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.526 [http-nio-8090-exec-47] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.526 [http-nio-8090-exec-47] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:49.526 [http-nio-8090-exec-47] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:49.526 [http-nio-8090-exec-47] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:49.526 [http-nio-8090-exec-47] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:49.527 [http-nio-8090-exec-47] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:43:59.443 [http-nio-8090-exec-44] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3da897bb (Communications link failure

The last packet successfully received from the server was 1,247,588 milliseconds ago. The last packet sent successfully to the server was 1,247,605 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
24-11-26.14:43:59.443 [http-nio-8090-exec-42] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@64eaf3bb (Communications link failure

The last packet successfully received from the server was 1,247,772 milliseconds ago. The last packet sent successfully to the server was 1,247,791 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
24-11-26.14:43:59.491 [http-nio-8090-exec-42] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:43:59.491 [http-nio-8090-exec-44] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:43:59.491 [http-nio-8090-exec-42] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:43:59.491 [http-nio-8090-exec-44] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:43:59.533 [http-nio-8090-exec-44] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:43:59.533 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:43:59.533 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.533 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.533 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.533 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.533 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.533 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.533 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.533 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:59.533 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.533 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:59.533 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:59.533 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:59.534 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:59.534 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.534 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:43:59.534 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:43:59.534 [http-nio-8090-exec-44] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:43:59.534 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:45:39.116 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.14:45:39.121 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.14:45:39.123 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.14:45:39.809 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.14:45:39.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.14:45:39.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.14:45:40.122 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.14:45:40.122 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.14:45:40.122 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.14:45:45.934 [main            ] INFO  Application            - Starting Application using Java 1.8.0_421 on GUOWEIHONG with PID 22828 (D:\JAVA_Project\bigmarket-14610-gwh\bigmarket-14610-gwh-app\target\classes started by 郭伟鸿 in D:\JAVA_Project\bigmarket-14610-gwh)
24-11-26.14:45:45.935 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-11-26.14:45:46.881 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-26.14:45:46.883 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-26.14:45:46.919 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
24-11-26.14:45:47.746 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8090 (http)
24-11-26.14:45:47.757 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8090"]
24-11-26.14:45:47.758 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-11-26.14:45:47.758 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-11-26.14:45:47.956 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-11-26.14:45:47.956 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1972 ms
24-11-26.14:45:48.523 [main            ] INFO  Version                - Redisson 3.23.4
24-11-26.14:45:49.050 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 124.70.185.116/124.70.185.116:6379
24-11-26.14:45:49.170 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 124.70.185.116/124.70.185.116:6379
24-11-26.14:45:52.319 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-26.14:45:52.474 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8090"]
24-11-26.14:45:52.499 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8090 (http) with context path ''
24-11-26.14:45:52.505 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-26.14:45:52.621 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6297cb4b:0/SimpleConnection@46c9ee28 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 36714]
24-11-26.14:45:52.785 [main            ] INFO  Application            - Started Application in 7.331 seconds (JVM running for 8.381)
24-11-26.14:45:55.094 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.14:45:56.029 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.14:46:07.640 [http-nio-8090-exec-7] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-11-26.14:46:07.640 [http-nio-8090-exec-7] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-11-26.14:46:07.641 [http-nio-8090-exec-7] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-11-26.14:46:08.006 [http-nio-8090-exec-7] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge2,activityId:100301
24-11-26.14:46:08.006 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge2,activityId:100301
24-11-26.14:46:08.020 [http-nio-8090-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:46:08.020 [http-nio-8090-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:46:08.020 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:46:08.020 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge2,activityId:100301
24-11-26.14:46:17.235 [http-nio-8090-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:46:17.236 [http-nio-8090-exec-23] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:46:17.236 [http-nio-8090-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:46:17.237 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:46:17.611 [http-nio-8090-exec-8] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.14:46:17.616 [http-nio-8090-exec-21] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge2 activityId:100301
24-11-26.14:46:17.616 [http-nio-8090-exec-14] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:46:18.629 [http-nio-8090-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.14:46:18.699 [http-nio-8090-exec-30] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:46:18.795 [http-nio-8090-exec-8] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.14:46:18.851 [http-nio-8090-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.14:46:18.862 [http-nio-8090-exec-30] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:46:18.882 [http-nio-8090-exec-12] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:18.884 [http-nio-8090-exec-6] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:18.882 [http-nio-8090-exec-8] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:18.882 [http-nio-8090-exec-5] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:18.882 [http-nio-8090-exec-4] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:18.885 [http-nio-8090-exec-6] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:18.885 [http-nio-8090-exec-12] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:18.885 [http-nio-8090-exec-5] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:18.885 [http-nio-8090-exec-4] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:18.885 [http-nio-8090-exec-8] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:18.887 [http-nio-8090-exec-3] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:xiaofuge2 activityId：100301
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$a10e0bfe.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:46:18.899 [http-nio-8090-exec-1] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:18.899 [http-nio-8090-exec-1] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:22.103 [http-nio-8090-exec-7] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:xiaofuge2 activityId：100301
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$a10e0bfe.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:46:22.121 [http-nio-8090-exec-23] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:23.214 [http-nio-8090-exec-23] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:25.732 [http-nio-8090-exec-2] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:25.735 [http-nio-8090-exec-2] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:27.348 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:46:27.348 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:0
24-11-26.14:46:27.348 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:46:27.362 [http-nio-8090-exec-2] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:46:27.362 [http-nio-8090-exec-1] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge2,activityId:100301 userTodayPartakeCount:0
24-11-26.14:46:27.363 [http-nio-8090-exec-23] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:0
24-11-26.14:46:27.370 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.370 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.370 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.370 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.370 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.370 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.370 [http-nio-8090-exec-23] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-23] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.370 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.370 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-23] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-23] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-23] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-23] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-23] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.371 [http-nio-8090-exec-23] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.371 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:0
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.385 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:0
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:46:27.394 [http-nio-8090-exec-12] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:46:27.464 [http-nio-8090-exec-21] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge2 activityId:100301 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.14:46:27.464 [http-nio-8090-exec-30] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1066,"monthCount":1090,"monthCountSurplus":1066,"totalCount":18890,"totalCountSurplus":10028}
24-11-26.14:46:27.464 [http-nio-8090-exec-14] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1066,"monthCount":1090,"monthCountSurplus":1066,"totalCount":18890,"totalCountSurplus":10028}
24-11-26.14:46:27.479 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:46:27.479 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:46:27.479 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:46:27.479 [http-nio-8090-exec-23] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:46:27.479 [http-nio-8090-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:46:27.479 [http-nio-8090-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:46:27.479 [http-nio-8090-exec-12] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:46:27.479 [http-nio-8090-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge2,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":3},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":2},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":false,"sort":7,"waitUnlockCount":1},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:46:27.482 [http-nio-8090-exec-15] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:46:27.727 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:46:27.741 [http-nio-8090-exec-9] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:46:30.382 [http-nio-8090-exec-20] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
24-11-26.14:46:31.901 [http-nio-8090-exec-20] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:46:31.901 [http-nio-8090-exec-20] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:46:31.990 [http-nio-8090-exec-20] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_101,库存：100，
24-11-26.14:46:31.990 [http-nio-8090-exec-20] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：101，库存：100，缓存key：strategy_award_count_key_100006_101
24-11-26.14:46:32.024 [http-nio-8090-exec-20] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_102,库存：100，
24-11-26.14:46:32.024 [http-nio-8090-exec-20] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：102，库存：100，缓存key：strategy_award_count_key_100006_102
24-11-26.14:46:32.053 [http-nio-8090-exec-20] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_103,库存：100，
24-11-26.14:46:32.053 [http-nio-8090-exec-20] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：103，库存：100，缓存key：strategy_award_count_key_100006_103
24-11-26.14:46:32.083 [http-nio-8090-exec-20] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_104,库存：100，
24-11-26.14:46:32.083 [http-nio-8090-exec-20] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：104，库存：100，缓存key：strategy_award_count_key_100006_104
24-11-26.14:46:32.097 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8862}],"info":"成功"}
24-11-26.14:46:32.097 [http-nio-8090-exec-15] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8862},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8862}],"info":"成功"}
24-11-26.14:46:32.108 [http-nio-8090-exec-20] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_105,库存：100，
24-11-26.14:46:32.108 [http-nio-8090-exec-20] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：105，库存：100，缓存key：strategy_award_count_key_100006_105
24-11-26.14:46:32.136 [http-nio-8090-exec-20] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_106,库存：100，
24-11-26.14:46:32.136 [http-nio-8090-exec-20] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：106，库存：100，缓存key：strategy_award_count_key_100006_106
24-11-26.14:46:32.172 [http-nio-8090-exec-20] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_107,库存：100，
24-11-26.14:46:32.172 [http-nio-8090-exec-20] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：107，库存：100，缓存key：strategy_award_count_key_100006_107
24-11-26.14:46:32.201 [http-nio-8090-exec-20] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_108,库存：100，
24-11-26.14:46:32.201 [http-nio-8090-exec-20] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：108，库存：100，缓存key：strategy_award_count_key_100006_108
24-11-26.14:46:32.346 [http-nio-8090-exec-20] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
24-11-26.14:46:56.224 [http-nio-8090-exec-26] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.14:46:56.609 [http-nio-8090-exec-26] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:jJLLsfXrvHUD
24-11-26.14:46:56.644 [http-nio-8090-exec-26] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.14:46:56.659 [http-nio-8090-exec-26] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.14:46:56.659 [http-nio-8090-exec-26] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:46:56.674 [http-nio-8090-exec-26] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:46:56.714 [http-nio-8090-exec-26] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 105
24-11-26.14:46:56.719 [http-nio-8090-exec-26] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 105 default
24-11-26.14:46:56.719 [http-nio-8090-exec-26] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.14:46:56.894 [http-nio-8090-exec-26] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:105 ruleValue:3
24-11-26.14:46:56.928 [http-nio-8090-exec-26] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_3 node:rule_lock code:0001
24-11-26.14:46:56.930 [http-nio-8090-exec-26] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:105 ruleValue:101:1,100
24-11-26.14:46:56.931 [http-nio-8090-exec-26] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:101 awardRuleValue:1,100
24-11-26.14:46:56.934 [http-nio-8090-exec-26] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_3 node:rule_luck_award code:0001
24-11-26.14:46:56.934 [http-nio-8090-exec-26] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 101 1,100
24-11-26.14:46:57.211 [http-nio-8090-exec-26] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"41746824759","timestamp":"2024-11-26 14:46:57.011"}
24-11-26.14:46:57.293 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"41746824759","timestamp":"2024-11-26 14:46:57.011"}
24-11-26.14:47:37.209 [http-nio-8090-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:47:37.211 [http-nio-8090-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:47:37.212 [http-nio-8090-exec-31] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:47:37.212 [http-nio-8090-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:47:37.226 [http-nio-8090-exec-32] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:47:37.226 [http-nio-8090-exec-33] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:47:37.252 [http-nio-8090-exec-28] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:47:37.252 [http-nio-8090-exec-13] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:47:37.252 [http-nio-8090-exec-28] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:47:37.252 [http-nio-8090-exec-29] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:47:37.252 [http-nio-8090-exec-13] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:47:37.252 [http-nio-8090-exec-29] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:47:37.261 [http-nio-8090-exec-31] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:47:37.262 [http-nio-8090-exec-31] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:47:54.015 [http-nio-8090-exec-33] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8863},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8863},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8863},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8863}],"info":"成功"}
24-11-26.14:47:54.020 [http-nio-8090-exec-34] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:47:54.025 [http-nio-8090-exec-32] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1065,"monthCount":1090,"monthCountSurplus":1065,"totalCount":18890,"totalCountSurplus":10027}
24-11-26.14:47:54.029 [http-nio-8090-exec-35] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:1
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.056 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.057 [http-nio-8090-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":2},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:1
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:1
24-11-26.14:47:54.070 [http-nio-8090-exec-28] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:1
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-28] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-28] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:47:54.070 [http-nio-8090-exec-28] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-31] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":2},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:47:54.070 [http-nio-8090-exec-28] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-29] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.070 [http-nio-8090-exec-28] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:47:54.070 [http-nio-8090-exec-28] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:47:54.071 [http-nio-8090-exec-28] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.071 [http-nio-8090-exec-29] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":2},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:47:54.071 [http-nio-8090-exec-28] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:47:54.071 [http-nio-8090-exec-28] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":2},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":false,"sort":6,"waitUnlockCount":1},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:47:54.074 [http-nio-8090-exec-38] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
24-11-26.14:47:54.080 [http-nio-8090-exec-36] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-26.14:47:54.080 [http-nio-8090-exec-34] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1065,"monthCount":1090,"monthCountSurplus":1065,"totalCount":18890,"totalCountSurplus":10027}
24-11-26.14:47:54.080 [http-nio-8090-exec-35] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8863},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8863},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8863},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8863}],"info":"成功"}
24-11-26.14:47:54.087 [http-nio-8090-exec-37] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:0
24-11-26.14:47:54.156 [http-nio-8090-exec-38] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:47:54.157 [http-nio-8090-exec-38] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:47:54.194 [http-nio-8090-exec-38] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：101，库存：100，缓存key：strategy_award_count_key_100006_101
24-11-26.14:47:54.205 [http-nio-8090-exec-38] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：102，库存：100，缓存key：strategy_award_count_key_100006_102
24-11-26.14:47:54.219 [http-nio-8090-exec-38] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：103，库存：100，缓存key：strategy_award_count_key_100006_103
24-11-26.14:47:54.234 [http-nio-8090-exec-38] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：104，库存：100，缓存key：strategy_award_count_key_100006_104
24-11-26.14:47:54.247 [http-nio-8090-exec-38] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：105，库存：100，缓存key：strategy_award_count_key_100006_105
24-11-26.14:47:54.260 [http-nio-8090-exec-38] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：106，库存：100，缓存key：strategy_award_count_key_100006_106
24-11-26.14:47:54.271 [http-nio-8090-exec-38] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：107，库存：100，缓存key：strategy_award_count_key_100006_107
24-11-26.14:47:54.284 [http-nio-8090-exec-38] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：108，库存：100，缓存key：strategy_award_count_key_100006_108
24-11-26.14:47:54.419 [http-nio-8090-exec-38] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
24-11-26.14:48:02.870 [http-nio-8090-exec-39] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.14:48:03.219 [http-nio-8090-exec-39] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:vOlHK82RqZhI
24-11-26.14:48:03.251 [http-nio-8090-exec-39] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.14:48:03.266 [http-nio-8090-exec-39] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.14:48:03.266 [http-nio-8090-exec-39] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:48:03.280 [http-nio-8090-exec-39] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:48:03.323 [http-nio-8090-exec-39] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 105
24-11-26.14:48:03.323 [http-nio-8090-exec-39] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 105 default
24-11-26.14:48:03.323 [http-nio-8090-exec-39] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.14:48:03.358 [http-nio-8090-exec-39] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:105 ruleValue:3
24-11-26.14:48:03.391 [http-nio-8090-exec-39] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_3 node:rule_lock code:0001
24-11-26.14:48:03.391 [http-nio-8090-exec-39] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:105 ruleValue:101:1,100
24-11-26.14:48:03.391 [http-nio-8090-exec-39] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:xiaofuge strategyId:100006 awardId:101 awardRuleValue:1,100
24-11-26.14:48:03.391 [http-nio-8090-exec-39] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_3 node:rule_luck_award code:0001
24-11-26.14:48:03.391 [http-nio-8090-exec-39] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 101 1,100
24-11-26.14:48:03.536 [http-nio-8090-exec-39] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"18917698575","timestamp":"2024-11-26 14:48:03.403"}
24-11-26.14:48:03.539 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"18917698575","timestamp":"2024-11-26 14:48:03.403"}
24-11-26.14:49:03.831 [http-nio-8090-exec-46] INFO  EventPublisher         - 发送消息成功 topic: send_rebate message: BaseEvent.EventMessage(id=42469980169, data=SendRebateMessageEvent.SendRebateMessage(userId=xiaofuge, rebateDesc=签到返利-sku额度, rebateType=sku, rebateConfig=9011, bizId=xiaofuge_sku_2024-11-26), timestamp=Tue Nov 26 14:49:03 CST 2024)
24-11-26.14:49:03.832 [http-nio-8090-exec-46] INFO  BehaviorRebateRepository - 写入返利记录，发送MQ消息 userId: xiaofuge topic: send_rebate
24-11-26.14:49:03.838 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendRebateCustomer     - 监听返利rebate发送消息 topic: send_rebate message: {"data":{"bizId":"xiaofuge_sku_2024-11-26","rebateConfig":"9011","rebateDesc":"签到返利-sku额度","rebateType":"sku","userId":"xiaofuge"},"id":"42469980169","timestamp":"2024-11-26 14:49:03.649"}
24-11-26.14:49:03.863 [http-nio-8090-exec-46] INFO  EventPublisher         - 发送消息成功 topic: send_rebate message: BaseEvent.EventMessage(id=61905931053, data=SendRebateMessageEvent.SendRebateMessage(userId=xiaofuge, rebateDesc=签到返利-积分, rebateType=integral, rebateConfig=10, bizId=xiaofuge_integral_2024-11-26), timestamp=Tue Nov 26 14:49:03 CST 2024)
24-11-26.14:49:03.863 [http-nio-8090-exec-46] INFO  BehaviorRebateRepository - 写入返利记录，发送MQ消息 userId: xiaofuge topic: send_rebate
24-11-26.14:49:03.902 [http-nio-8090-exec-46] INFO  RaffleActivityController - 日历签到返利完成 userId:xiaofuge orderIds: ["jTE7bAv9D38","nlnnNGWkBOb"]
24-11-26.14:49:03.940 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始。sku:9011 activityId:100301
24-11-26.14:49:03.940 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。9011
24-11-26.14:49:03.974 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
24-11-26.14:49:04.071 [http-nio-8090-exec-49] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:49:04.071 [http-nio-8090-exec-47] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:49:04.118 [http-nio-8090-exec-49] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8864}],"info":"成功"}
24-11-26.14:49:04.136 [http-nio-8090-exec-47] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1064,"monthCount":1090,"monthCountSurplus":1064,"totalCount":18890,"totalCountSurplus":10026}
24-11-26.14:49:04.245 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] ERROR ActivityRepository     - 写入订单记录，唯一索引冲突 userId: xiaofuge activityId: 100301 sku: 9011
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'xiaofuge_sku_2024-11-26' for key 'raffle_activity_order_001.uq_out_business_no'
### The error may exist in file [D:\JAVA_Project\bigmarket-14610-gwh\bigmarket-14610-gwh-app\target\classes\mybatis\mapper\raffle_activity_order_mapper.xml]
### The error may involve cn.bugstack.infrastructure.persistent.dao.IRaffleActivityOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into raffle_activity_order_001 ( user_id,sku, activity_id, activity_name, strategy_id, order_id, order_time,total_count, day_count, month_count, state,out_business_no, create_time, update_time)         values (?, ?,?, ?, ?, ?, ?, ?,?,?,?, ?,now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'xiaofuge_sku_2024-11-26' for key 'raffle_activity_order_001.uq_out_business_no'
; Duplicate entry 'xiaofuge_sku_2024-11-26' for key 'raffle_activity_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'xiaofuge_sku_2024-11-26' for key 'raffle_activity_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy109.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy115.insert(Unknown Source)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at com.sun.proxy.$Proxy116.insert(Unknown Source)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.lambda$doSaveOrder$0(ActivityRepository.java:201)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.doSaveOrder(ActivityRepository.java:198)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$a10e0bfe.doSaveOrder(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.doSaveOrder(RaffleActivityAccountQuotaService.java:61)
	at cn.bugstack.domain.activity.service.quota.AbstractRaffleActivityAccountQuota.createOrder(AbstractRaffleActivityAccountQuota.java:56)
	at cn.bugstack.trigger.listener.SendRebateCustomer.listener(SendRebateCustomer.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry 'xiaofuge_sku_2024-11-26' for key 'raffle_activity_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.GeneratedMethodAccessor67.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy178.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 54 common frames omitted
24-11-26.14:49:04.275 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] WARN  SendRebateCustomer     - 监听用户行为返利消息，消费重复 topic: send_rebate message: {"data":{"bizId":"xiaofuge_sku_2024-11-26","rebateConfig":"9011","rebateDesc":"签到返利-sku额度","rebateType":"sku","userId":"xiaofuge"},"id":"42469980169","timestamp":"2024-11-26 14:49:03.649"}
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.lambda$doSaveOrder$0(ActivityRepository.java:217)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.doSaveOrder(ActivityRepository.java:198)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$a10e0bfe.doSaveOrder(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.doSaveOrder(RaffleActivityAccountQuotaService.java:61)
	at cn.bugstack.domain.activity.service.quota.AbstractRaffleActivityAccountQuota.createOrder(AbstractRaffleActivityAccountQuota.java:56)
	at cn.bugstack.trigger.listener.SendRebateCustomer.listener(SendRebateCustomer.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:77)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:263)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:209)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:148)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1674)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1593)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1581)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1572)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1516)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.access$1600(SimpleMessageListenerContainer.java:86)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:49:04.279 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendRebateCustomer     - 监听返利rebate发送消息 topic: send_rebate message: {"data":{"bizId":"xiaofuge_integral_2024-11-26","rebateConfig":"10","rebateDesc":"签到返利-积分","rebateType":"integral","userId":"xiaofuge"},"id":"61905931053","timestamp":"2024-11-26 14:49:03.655"}
24-11-26.14:49:04.281 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendRebateCustomer     - 监听用户行为返利消息 - 非sku奖励暂时不处理 topic: send_rebate message: {"data":{"bizId":"xiaofuge_integral_2024-11-26","rebateConfig":"10","rebateDesc":"签到返利-积分","rebateType":"integral","userId":"xiaofuge"},"id":"61905931053","timestamp":"2024-11-26 14:49:03.655"}
24-11-26.14:49:09.568 [http-nio-8090-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:49:09.569 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:49:09.572 [http-nio-8090-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:49:09.572 [http-nio-8090-exec-30] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:49:09.586 [http-nio-8090-exec-21] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:49:09.586 [http-nio-8090-exec-6] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:49:09.626 [http-nio-8090-exec-3] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:49:09.626 [http-nio-8090-exec-3] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:49:09.632 [http-nio-8090-exec-7] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:49:09.633 [http-nio-8090-exec-14] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:49:09.633 [http-nio-8090-exec-14] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:49:09.633 [http-nio-8090-exec-7] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:49:09.633 [http-nio-8090-exec-30] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:49:09.633 [http-nio-8090-exec-30] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:49:09.659 [http-nio-8090-exec-6] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1064,"monthCount":1090,"monthCountSurplus":1064,"totalCount":18890,"totalCountSurplus":10026}
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.659 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:49:09.661 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:49:09.674 [http-nio-8090-exec-21] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1064,"monthCount":1090,"monthCountSurplus":1064,"totalCount":18890,"totalCountSurplus":10026}
24-11-26.14:49:09.676 [http-nio-8090-exec-1] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:49:09.677 [http-nio-8090-exec-30] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:49:09.677 [http-nio-8090-exec-7] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:49:09.677 [http-nio-8090-exec-14] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:49:09.680 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:49:09.691 [http-nio-8090-exec-23] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:49:09.706 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8864}],"info":"成功"}
24-11-26.14:49:09.725 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8864}],"info":"成功"}
24-11-26.14:50:35.418 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:50:35.420 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:50:35.420 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:50:35.420 [http-nio-8090-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:50:35.454 [http-nio-8090-exec-11] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:50:35.457 [http-nio-8090-exec-10] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:50:35.460 [http-nio-8090-exec-15] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:50:35.460 [http-nio-8090-exec-20] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:50:35.460 [http-nio-8090-exec-15] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:50:35.460 [http-nio-8090-exec-20] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:50:35.463 [http-nio-8090-exec-16] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:50:35.463 [http-nio-8090-exec-17] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:50:35.463 [http-nio-8090-exec-16] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:50:35.463 [http-nio-8090-exec-17] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:50:35.471 [http-nio-8090-exec-22] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:50:35.474 [http-nio-8090-exec-24] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:50:35.498 [http-nio-8090-exec-10] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1064,"monthCount":1090,"monthCountSurplus":1064,"totalCount":18890,"totalCountSurplus":10026}
24-11-26.14:50:35.500 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:50:35.505 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:50:35.505 [http-nio-8090-exec-15] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:50:35.505 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.505 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.505 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.505 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.505 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.505 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:50:35.506 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:50:35.506 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-15] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.506 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:50:35.506 [http-nio-8090-exec-15] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:50:35.508 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:50:35.510 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:50:35.510 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:50:35.510 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:false
24-11-26.14:50:35.511 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!isAwardUnlock:true
24-11-26.14:50:35.511 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:50:35.511 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:50:35.521 [http-nio-8090-exec-24] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1064,"monthCount":1090,"monthCountSurplus":1064,"totalCount":18890,"totalCountSurplus":10026}
24-11-26.14:50:35.548 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8864}],"info":"成功"}
24-11-26.14:50:35.561 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8864}],"info":"成功"}
24-11-26.14:50:38.531 [http-nio-8090-exec-27] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
24-11-26.14:50:38.733 [http-nio-8090-exec-27] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:50:38.733 [http-nio-8090-exec-27] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:50:38.807 [http-nio-8090-exec-27] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：101，库存：100，缓存key：strategy_award_count_key_100006_101
24-11-26.14:50:38.841 [http-nio-8090-exec-27] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：102，库存：100，缓存key：strategy_award_count_key_100006_102
24-11-26.14:50:38.870 [http-nio-8090-exec-27] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：103，库存：100，缓存key：strategy_award_count_key_100006_103
24-11-26.14:50:38.897 [http-nio-8090-exec-27] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：104，库存：100，缓存key：strategy_award_count_key_100006_104
24-11-26.14:50:38.915 [http-nio-8090-exec-27] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：105，库存：100，缓存key：strategy_award_count_key_100006_105
24-11-26.14:50:38.928 [http-nio-8090-exec-27] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：106，库存：100，缓存key：strategy_award_count_key_100006_106
24-11-26.14:50:38.951 [http-nio-8090-exec-27] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：107，库存：100，缓存key：strategy_award_count_key_100006_107
24-11-26.14:50:38.967 [http-nio-8090-exec-27] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：108，库存：100，缓存key：strategy_award_count_key_100006_108
24-11-26.14:50:39.111 [http-nio-8090-exec-27] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
24-11-26.14:54:25.422 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.14:54:25.423 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.14:54:25.424 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.14:54:25.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.14:54:26.272 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.14:54:26.347 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.14:54:26.557 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.14:54:26.557 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.14:54:26.558 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.14:54:32.499 [main            ] INFO  Application            - Starting Application using Java 1.8.0_421 on GUOWEIHONG with PID 41848 (D:\JAVA_Project\bigmarket-14610-gwh\bigmarket-14610-gwh-app\target\classes started by 郭伟鸿 in D:\JAVA_Project\bigmarket-14610-gwh)
24-11-26.14:54:32.501 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-11-26.14:54:33.406 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-26.14:54:33.408 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-26.14:54:33.445 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
24-11-26.14:54:34.298 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8090 (http)
24-11-26.14:54:34.312 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8090"]
24-11-26.14:54:34.312 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-11-26.14:54:34.312 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-11-26.14:54:34.483 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-11-26.14:54:34.483 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1937 ms
24-11-26.14:54:35.012 [main            ] INFO  Version                - Redisson 3.23.4
24-11-26.14:54:35.540 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 124.70.185.116/124.70.185.116:6379
24-11-26.14:54:35.687 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 124.70.185.116/124.70.185.116:6379
24-11-26.14:54:38.107 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-26.14:54:38.225 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8090"]
24-11-26.14:54:38.245 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8090 (http) with context path ''
24-11-26.14:54:38.248 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-26.14:54:38.315 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#60e67c06:0/SimpleConnection@43e2b8da [delegate=amqp://admin@127.0.0.1:5672/, localPort= 58167]
24-11-26.14:54:38.457 [main            ] INFO  Application            - Started Application in 6.44 seconds (JVM running for 7.269)
24-11-26.14:54:40.167 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.14:54:40.823 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.14:54:44.856 [http-nio-8090-exec-3] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-11-26.14:54:44.856 [http-nio-8090-exec-3] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-11-26.14:54:44.857 [http-nio-8090-exec-3] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-11-26.14:54:45.129 [http-nio-8090-exec-5] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:54:45.167 [http-nio-8090-exec-1] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:54:45.187 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:54:45.187 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:54:45.187 [http-nio-8090-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:54:45.187 [http-nio-8090-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.14:54:45.187 [http-nio-8090-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:54:45.260 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:54:45.395 [http-nio-8090-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.14:54:45.587 [http-nio-8090-exec-1] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1064,"monthCount":1090,"monthCountSurplus":1064,"totalCount":18890,"totalCountSurplus":10026}
24-11-26.14:54:45.596 [http-nio-8090-exec-1] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:54:50.150 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:54:55.975 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:54:55.977 [http-nio-8090-exec-1] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1064,"monthCount":1090,"monthCountSurplus":1064,"totalCount":18890,"totalCountSurplus":10026}
24-11-26.14:54:59.486 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:54:59.486 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:54:59.486 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:54:59.486 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:false
24-11-26.14:54:59.486 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:54:59.486 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:54:59.486 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:54:59.489 [http-nio-8090-exec-2] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:54:59.489 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:54:59.489 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:54:59.489 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:54:59.489 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:54:59.490 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:false
24-11-26.14:54:59.490 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:54:59.490 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:54:59.492 [http-nio-8090-exec-2] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:54:59.491 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:54:59.494 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:54:59.495 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:54:59.495 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:54:59.495 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:54:59.495 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:false
24-11-26.14:54:59.495 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:54:59.495 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:54:59.495 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:54:59.495 [http-nio-8090-exec-4] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:2
24-11-26.14:54:59.496 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:54:59.496 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:54:59.496 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:54:59.496 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:54:59.496 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:false
24-11-26.14:54:59.496 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:54:59.496 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:54:59.496 [http-nio-8090-exec-4] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:54:59.517 [http-nio-8090-exec-7] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:54:59.521 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:54:59.532 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:54:59.532 [http-nio-8090-exec-2] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:54:59.532 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:54:59.532 [http-nio-8090-exec-4] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":false,"sort":5,"waitUnlockCount":1},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:54:59.852 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8864}],"info":"成功"}
24-11-26.14:54:59.973 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8864},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8864}],"info":"成功"}
24-11-26.14:55:23.055 [http-nio-8090-exec-17] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.14:55:23.725 [http-nio-8090-exec-17] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:4LECVYQc1Fja
24-11-26.14:55:23.816 [http-nio-8090-exec-17] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.14:55:23.898 [http-nio-8090-exec-17] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.14:55:23.898 [http-nio-8090-exec-17] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:55:24.046 [http-nio-8090-exec-17] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:55:24.172 [http-nio-8090-exec-17] ERROR RaffleActivityController - 活动抽奖失败 userId:xiaofuge activityId:100301
cn.bugstack.types.exception.AppException: null
	at cn.bugstack.infrastructure.persistent.repository.StrategyRepository.getRateRange(StrategyRepository.java:114)
	at cn.bugstack.infrastructure.persistent.repository.StrategyRepository.getRateRange(StrategyRepository.java:121)
	at cn.bugstack.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$1981c8fe.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$d30ff7a9.getRateRange(<generated>)
	at cn.bugstack.domain.strategy.service.armory.StrategyArmoryDispatch.getRandomAwardId(StrategyArmoryDispatch.java:126)
	at cn.bugstack.domain.strategy.service.rule.chain.impl.DefaultLogicChain.logic(DefaultLogicChain.java:25)
	at cn.bugstack.domain.strategy.service.rule.chain.impl.RuleWeightLogicChain.logic(RuleWeightLogicChain.java:71)
	at cn.bugstack.domain.strategy.service.rule.chain.impl.BackListLogicChain.logic(BackListLogicChain.java:45)
	at cn.bugstack.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicChain(DefaultRaffleStrategy.java:43)
	at cn.bugstack.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:58)
	at cn.bugstack.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:144)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.14:55:28.611 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:55:28.662 [http-nio-8090-exec-16] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:55:28.662 [http-nio-8090-exec-16] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:55:28.722 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:3
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:55:28.723 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:55:29.264 [http-nio-8090-exec-15] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
24-11-26.14:55:29.468 [http-nio-8090-exec-15] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:55:29.468 [http-nio-8090-exec-15] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:55:29.570 [http-nio-8090-exec-15] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_101,库存：100，
24-11-26.14:55:29.570 [http-nio-8090-exec-15] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：101，库存：100，缓存key：strategy_award_count_key_100006_101
24-11-26.14:55:29.604 [http-nio-8090-exec-15] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_102,库存：100，
24-11-26.14:55:29.604 [http-nio-8090-exec-15] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：102，库存：100，缓存key：strategy_award_count_key_100006_102
24-11-26.14:55:29.680 [http-nio-8090-exec-15] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_103,库存：100，
24-11-26.14:55:29.680 [http-nio-8090-exec-15] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：103，库存：100，缓存key：strategy_award_count_key_100006_103
24-11-26.14:55:29.723 [http-nio-8090-exec-15] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_104,库存：100，
24-11-26.14:55:29.723 [http-nio-8090-exec-15] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：104，库存：100，缓存key：strategy_award_count_key_100006_104
24-11-26.14:55:29.764 [http-nio-8090-exec-15] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_105,库存：100，
24-11-26.14:55:29.764 [http-nio-8090-exec-15] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：105，库存：100，缓存key：strategy_award_count_key_100006_105
24-11-26.14:55:29.801 [http-nio-8090-exec-15] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_106,库存：100，
24-11-26.14:55:29.801 [http-nio-8090-exec-15] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：106，库存：100，缓存key：strategy_award_count_key_100006_106
24-11-26.14:55:29.842 [http-nio-8090-exec-15] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_107,库存：100，
24-11-26.14:55:29.842 [http-nio-8090-exec-15] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：107，库存：100，缓存key：strategy_award_count_key_100006_107
24-11-26.14:55:29.873 [http-nio-8090-exec-15] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_108,库存：100，
24-11-26.14:55:29.873 [http-nio-8090-exec-15] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：108，库存：100，缓存key：strategy_award_count_key_100006_108
24-11-26.14:55:30.055 [http-nio-8090-exec-15] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
24-11-26.14:55:34.420 [http-nio-8090-exec-18] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.14:55:34.504 [http-nio-8090-exec-18] INFO  AbstractRaffleActivityPartake - 创建参与活动订单[已经创建没有使用] userId:xiaofuge activityId:100301 userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"4LECVYQc1Fja","orderState":"create","orderTime":"2024-11-26 14:55:23","strategyId":100006,"userId":"xiaofuge"}
24-11-26.14:55:34.504 [http-nio-8090-exec-18] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:4LECVYQc1Fja
24-11-26.14:55:34.550 [http-nio-8090-exec-18] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.14:55:34.572 [http-nio-8090-exec-18] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.14:55:34.572 [http-nio-8090-exec-18] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:55:34.587 [http-nio-8090-exec-18] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:55:34.665 [http-nio-8090-exec-18] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 107
24-11-26.14:55:34.671 [http-nio-8090-exec-18] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 107 default
24-11-26.14:55:34.671 [http-nio-8090-exec-18] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.14:55:34.831 [http-nio-8090-exec-18] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:107 ruleValue:1
24-11-26.14:55:34.873 [http-nio-8090-exec-18] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_1 node:rule_lock code:0000
24-11-26.14:55:34.874 [http-nio-8090-exec-18] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 107
24-11-26.14:55:35.040 [http-nio-8090-exec-18] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_1 node:rule_stock code:0001
24-11-26.14:55:35.041 [http-nio-8090-exec-18] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 107 null
24-11-26.14:55:35.312 [http-nio-8090-exec-18] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":107,"awardTitle":"小霸王游戏机","userId":"xiaofuge"},"id":"55620256116","timestamp":"2024-11-26 14:55:35.114"}
24-11-26.14:55:35.343 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":107,"awardTitle":"小霸王游戏机","userId":"xiaofuge"},"id":"55620256116","timestamp":"2024-11-26 14:55:35.114"}
24-11-26.14:58:15.605 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:58:15.605 [http-nio-8090-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:58:15.657 [http-nio-8090-exec-21] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:58:15.657 [http-nio-8090-exec-20] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:58:15.657 [http-nio-8090-exec-21] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:58:15.657 [http-nio-8090-exec-20] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:58:15.700 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:3
24-11-26.14:58:15.700 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:58:15.700 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:58:15.700 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:58:15.701 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:58:15.701 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:58:15.701 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:58:15.701 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:58:15.701 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:58:15.701 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:58:15.701 [http-nio-8090-exec-21] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:3
24-11-26.14:58:15.701 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:58:15.702 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:58:15.702 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:58:15.702 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:58:15.702 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:58:15.702 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:58:15.702 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:58:15.702 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:58:15.702 [http-nio-8090-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:58:23.763 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:58:23.763 [http-nio-8090-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:58:23.765 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:58:23.768 [http-nio-8090-exec-27] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:58:23.781 [http-nio-8090-exec-28] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:58:23.817 [http-nio-8090-exec-24] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:58:23.817 [http-nio-8090-exec-25] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:58:23.817 [http-nio-8090-exec-24] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:58:23.817 [http-nio-8090-exec-25] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:58:23.818 [http-nio-8090-exec-29] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:58:23.818 [http-nio-8090-exec-27] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:58:23.818 [http-nio-8090-exec-27] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:58:23.818 [http-nio-8090-exec-26] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:58:23.818 [http-nio-8090-exec-26] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:58:23.821 [http-nio-8090-exec-31] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:3
24-11-26.14:58:23.855 [http-nio-8090-exec-28] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1063,"monthCount":1090,"monthCountSurplus":1063,"totalCount":18890,"totalCountSurplus":10025}
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:58:23.855 [http-nio-8090-exec-26] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:58:23.856 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:58:23.858 [http-nio-8090-exec-33] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:3
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:3
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:3
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-27] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:58:23.871 [http-nio-8090-exec-25] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:58:23.872 [http-nio-8090-exec-27] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:58:23.872 [http-nio-8090-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:58:23.872 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:58:23.873 [http-nio-8090-exec-30] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:58:23.875 [http-nio-8090-exec-32] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:58:23.890 [http-nio-8090-exec-31] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1063,"monthCount":1090,"monthCountSurplus":1063,"totalCount":18890,"totalCountSurplus":10025}
24-11-26.14:58:23.906 [http-nio-8090-exec-33] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8865},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8865},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8865},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8865}],"info":"成功"}
24-11-26.14:58:23.918 [http-nio-8090-exec-32] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8865},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8865},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8865},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8865}],"info":"成功"}
24-11-26.14:58:30.086 [http-nio-8090-exec-39] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.14:58:30.479 [http-nio-8090-exec-39] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:i6mrFJiYVt0X
24-11-26.14:58:30.510 [http-nio-8090-exec-39] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.14:58:30.532 [http-nio-8090-exec-39] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.14:58:30.532 [http-nio-8090-exec-39] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:58:30.549 [http-nio-8090-exec-39] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.14:58:30.595 [http-nio-8090-exec-39] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 107
24-11-26.14:58:30.595 [http-nio-8090-exec-39] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 107 default
24-11-26.14:58:30.595 [http-nio-8090-exec-39] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.14:58:30.647 [http-nio-8090-exec-39] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:xiaofuge strategyId:100006 awardId:107 ruleValue:1
24-11-26.14:58:30.688 [http-nio-8090-exec-39] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_1 node:rule_lock code:0000
24-11-26.14:58:30.688 [http-nio-8090-exec-39] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 107
24-11-26.14:58:30.736 [http-nio-8090-exec-39] INFO  DecisionTreeEngine     - 决策树引擎【规则树】treeId:tree_lock_1 node:rule_stock code:0001
24-11-26.14:58:30.737 [http-nio-8090-exec-39] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 107 null
24-11-26.14:58:30.914 [http-nio-8090-exec-39] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":107,"awardTitle":"小霸王游戏机","userId":"xiaofuge"},"id":"71762621747","timestamp":"2024-11-26 14:58:30.752"}
24-11-26.14:58:30.918 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":107,"awardTitle":"小霸王游戏机","userId":"xiaofuge"},"id":"71762621747","timestamp":"2024-11-26 14:58:30.752"}
24-11-26.14:59:56.785 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:59:56.785 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:59:56.790 [http-nio-8090-exec-45] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:59:56.791 [http-nio-8090-exec-44] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.14:59:56.803 [http-nio-8090-exec-47] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:59:56.803 [http-nio-8090-exec-46] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.14:59:56.836 [http-nio-8090-exec-42] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:59:56.836 [http-nio-8090-exec-42] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:59:56.841 [http-nio-8090-exec-44] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:59:56.841 [http-nio-8090-exec-43] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:59:56.841 [http-nio-8090-exec-45] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.14:59:56.841 [http-nio-8090-exec-44] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:59:56.841 [http-nio-8090-exec-43] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:59:56.841 [http-nio-8090-exec-45] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.14:59:56.868 [http-nio-8090-exec-46] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1062,"monthCount":1090,"monthCountSurplus":1062,"totalCount":18890,"totalCountSurplus":10024}
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:4
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:59:56.869 [http-nio-8090-exec-44] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:59:56.872 [http-nio-8090-exec-49] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:4
24-11-26.14:59:56.882 [http-nio-8090-exec-47] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1062,"monthCount":1090,"monthCountSurplus":1062,"totalCount":18890,"totalCountSurplus":10024}
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:4
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:59:56.882 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:59:56.883 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:59:56.883 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:4
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.14:59:56.884 [http-nio-8090-exec-45] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.14:59:56.886 [http-nio-8090-exec-1] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.14:59:56.888 [http-nio-8090-exec-48] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:59:56.902 [http-nio-8090-exec-50] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.14:59:56.920 [http-nio-8090-exec-49] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8866},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8866},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8866},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8866}],"info":"成功"}
24-11-26.14:59:56.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8866},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8866},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8866},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8866}],"info":"成功"}
24-11-26.15:00:01.320 [http-nio-8090-exec-7] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.15:00:01.662 [http-nio-8090-exec-7] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:8VYvrjkyeeuq
24-11-26.15:00:01.689 [http-nio-8090-exec-7] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.15:00:01.705 [http-nio-8090-exec-7] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.15:00:01.705 [http-nio-8090-exec-7] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:00:01.720 [http-nio-8090-exec-7] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:00:01.763 [http-nio-8090-exec-7] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 102
24-11-26.15:00:01.763 [http-nio-8090-exec-7] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 102 default
24-11-26.15:00:01.763 [http-nio-8090-exec-7] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.15:00:01.859 [http-nio-8090-exec-7] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 102
24-11-26.15:00:01.902 [http-nio-8090-exec-7] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-11-26.15:00:01.902 [http-nio-8090-exec-7] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 102 null
24-11-26.15:00:02.080 [http-nio-8090-exec-7] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"47280294444","timestamp":"2024-11-26 15:00:01.942"}
24-11-26.15:00:02.083 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"47280294444","timestamp":"2024-11-26 15:00:01.942"}
24-11-26.15:00:30.796 [http-nio-8090-exec-10] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:null,activityId:0
24-11-26.15:00:30.796 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:null,activityId:0
24-11-26.15:00:30.796 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:null,activityId:0
24-11-26.15:00:30.796 [http-nio-8090-exec-11] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:null,activityId:0
24-11-26.15:00:30.805 [http-nio-8090-exec-19] INFO  RaffleActivityController - 查询用户活动账户 userId:null activityId:0
24-11-26.15:00:30.806 [http-nio-8090-exec-19] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.15:00:31.053 [http-nio-8090-exec-19] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.15:00:31.071 [http-nio-8090-exec-19] INFO  RaffleActivityController - 查询用户活动账户开始 userId:null activityId:0 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.15:00:31.095 [http-nio-8090-exec-10] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:null,activityId:0 userTodayPartakeCount:0
24-11-26.15:00:31.095 [http-nio-8090-exec-10] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:null,activityId:0 response:{"code":"0000","data":[],"info":"成功"}
24-11-26.15:00:31.099 [http-nio-8090-exec-22] INFO  RaffleActivityController - 查询用户活动账户 userId:null activityId:0
24-11-26.15:00:31.110 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:null,activityId:0 userTodayPartakeCount:0
24-11-26.15:00:31.111 [http-nio-8090-exec-16] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:null,activityId:0 response:{"code":"0000","data":[],"info":"成功"}
24-11-26.15:00:31.122 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:null,activityId:0
24-11-26.15:00:31.129 [http-nio-8090-exec-20] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:null orders.size:0
24-11-26.15:00:31.134 [http-nio-8090-exec-28] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:null,activityId:0
24-11-26.15:00:31.143 [http-nio-8090-exec-11] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:null,activityId:0 userTodayPartakeCount:0
24-11-26.15:00:31.143 [http-nio-8090-exec-11] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:null,activityId:0 response:{"code":"0000","data":[],"info":"成功"}
24-11-26.15:00:31.167 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:null,activityId:0 userTodayPartakeCount:0
24-11-26.15:00:31.167 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:null,activityId:0 response:{"code":"0000","data":[],"info":"成功"}
24-11-26.15:00:31.200 [http-nio-8090-exec-21] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:null orders.size:0
24-11-26.15:00:31.227 [http-nio-8090-exec-22] INFO  RaffleActivityController - 查询用户活动账户开始 userId:null activityId:0 dto:{"dayCount":0,"dayCountSurplus":0,"monthCount":0,"monthCountSurplus":0,"totalCount":0,"totalCountSurplus":0}
24-11-26.15:00:31.257 [http-nio-8090-exec-26] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:null activityId：0
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e80c2efd.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.15:00:31.285 [http-nio-8090-exec-28] ERROR RaffleStrategyController - 查询抽奖策略权重规则配置失败 userId:null activityId：0
java.lang.NullPointerException: null
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository.queryUserPartakeCount(ActivityRepository.java:599)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$FastClassBySpringCGLIB$$5fc4459a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.persistent.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e80c2efd.queryUserPartakeCount(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.queryUserPartakeCount(RaffleActivityAccountQuotaService.java:97)
	at cn.bugstack.trigger.http.RaffleStrategyController.queryRaffleStrategyRuleWeight(RaffleStrategyController.java:208)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
24-11-26.15:00:38.988 [http-nio-8090-exec-32] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:00:38.988 [http-nio-8090-exec-35] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:00:38.991 [http-nio-8090-exec-36] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:00:38.991 [http-nio-8090-exec-34] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:00:39.034 [http-nio-8090-exec-34] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:00:39.034 [http-nio-8090-exec-34] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:00:39.034 [http-nio-8090-exec-32] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:00:39.035 [http-nio-8090-exec-32] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:00:39.037 [http-nio-8090-exec-37] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:00:39.037 [http-nio-8090-exec-35] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:00:39.037 [http-nio-8090-exec-35] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:00:39.038 [http-nio-8090-exec-38] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:00:39.040 [http-nio-8090-exec-40] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:00:39.041 [http-nio-8090-exec-36] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:00:39.041 [http-nio-8090-exec-36] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:00:39.042 [http-nio-8090-exec-39] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:5
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:5
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-34] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:00:39.079 [http-nio-8090-exec-32] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:00:39.082 [http-nio-8090-exec-46] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:00:39.082 [http-nio-8090-exec-41] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:00:39.088 [http-nio-8090-exec-36] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:5
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:00:39.088 [http-nio-8090-exec-35] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:5
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-39] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8867},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8867},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8867},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8867}],"info":"成功"}
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:00:39.089 [http-nio-8090-exec-35] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:00:39.089 [http-nio-8090-exec-36] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:00:39.090 [http-nio-8090-exec-40] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1061,"monthCount":1090,"monthCountSurplus":1061,"totalCount":18890,"totalCountSurplus":10023}
24-11-26.15:00:39.126 [http-nio-8090-exec-41] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1061,"monthCount":1090,"monthCountSurplus":1061,"totalCount":18890,"totalCountSurplus":10023}
24-11-26.15:00:39.140 [http-nio-8090-exec-46] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8867},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8867},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8867},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8867}],"info":"成功"}
24-11-26.15:00:43.453 [http-nio-8090-exec-42] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.15:00:43.786 [http-nio-8090-exec-42] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:EMymC9uhIKzm
24-11-26.15:00:43.811 [http-nio-8090-exec-42] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.15:00:43.828 [http-nio-8090-exec-42] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.15:00:43.828 [http-nio-8090-exec-42] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:00:43.845 [http-nio-8090-exec-42] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:00:43.884 [http-nio-8090-exec-42] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 102
24-11-26.15:00:43.884 [http-nio-8090-exec-42] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 102 default
24-11-26.15:00:43.884 [http-nio-8090-exec-42] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.15:00:43.912 [http-nio-8090-exec-42] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 102
24-11-26.15:00:43.956 [http-nio-8090-exec-42] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-11-26.15:00:43.956 [http-nio-8090-exec-42] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 102 null
24-11-26.15:00:44.112 [http-nio-8090-exec-42] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"67334223724","timestamp":"2024-11-26 15:00:43.972"}
24-11-26.15:00:44.118 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"67334223724","timestamp":"2024-11-26 15:00:43.972"}
24-11-26.15:00:49.256 [http-nio-8090-exec-1] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.15:00:49.575 [http-nio-8090-exec-1] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:6aDHkAujjpEO
24-11-26.15:00:49.601 [http-nio-8090-exec-1] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.15:00:49.615 [http-nio-8090-exec-1] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.15:00:49.615 [http-nio-8090-exec-1] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:00:49.631 [http-nio-8090-exec-1] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:00:49.673 [http-nio-8090-exec-1] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 102
24-11-26.15:00:49.673 [http-nio-8090-exec-1] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 102 default
24-11-26.15:00:49.673 [http-nio-8090-exec-1] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.15:00:49.700 [http-nio-8090-exec-1] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 102
24-11-26.15:00:49.746 [http-nio-8090-exec-1] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-11-26.15:00:49.746 [http-nio-8090-exec-1] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 102 null
24-11-26.15:00:49.888 [http-nio-8090-exec-1] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"65338930949","timestamp":"2024-11-26 15:00:49.76"}
24-11-26.15:00:49.891 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":102,"awardTitle":"OpenAI会员卡","userId":"xiaofuge"},"id":"65338930949","timestamp":"2024-11-26 15:00:49.76"}
24-11-26.15:01:37.367 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.15:01:37.371 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.15:01:37.373 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.15:01:38.267 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.15:01:38.275 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.15:01:38.386 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.15:01:38.585 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.15:01:38.585 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.15:01:38.585 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.15:01:45.759 [main            ] INFO  Application            - Starting Application using Java 1.8.0_421 on GUOWEIHONG with PID 41228 (D:\JAVA_Project\bigmarket-14610-gwh\bigmarket-14610-gwh-app\target\classes started by 郭伟鸿 in D:\JAVA_Project\bigmarket-14610-gwh)
24-11-26.15:01:45.760 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-11-26.15:01:46.565 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-26.15:01:46.568 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-26.15:01:46.598 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
24-11-26.15:01:47.351 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8090 (http)
24-11-26.15:01:47.361 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8090"]
24-11-26.15:01:47.361 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-11-26.15:01:47.361 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-11-26.15:01:47.529 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-11-26.15:01:47.529 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1727 ms
24-11-26.15:01:48.064 [main            ] INFO  Version                - Redisson 3.23.4
24-11-26.15:01:48.622 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 124.70.185.116/124.70.185.116:6379
24-11-26.15:01:48.764 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 124.70.185.116/124.70.185.116:6379
24-11-26.15:01:51.370 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-26.15:01:51.533 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8090"]
24-11-26.15:01:51.557 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8090 (http) with context path ''
24-11-26.15:01:51.560 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
24-11-26.15:01:51.665 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#76eadc5a:0/SimpleConnection@2de07c57 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 3698]
24-11-26.15:01:51.821 [main            ] INFO  Application            - Started Application in 6.502 seconds (JVM running for 7.411)
24-11-26.15:01:54.298 [http-nio-8090-exec-3] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-11-26.15:01:54.298 [http-nio-8090-exec-3] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-11-26.15:01:54.299 [http-nio-8090-exec-3] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-11-26.15:01:54.587 [http-nio-8090-exec-7] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.15:01:54.606 [http-nio-8090-exec-4] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:01:54.621 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:01:54.621 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:01:54.621 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:01:54.621 [http-nio-8090-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:01:54.630 [http-nio-8090-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-26.15:01:55.386 [http-nio-8090-exec-7] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.15:01:55.389 [http-nio-8090-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-26.15:01:55.591 [http-nio-8090-exec-7] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:01:55.808 [http-nio-8090-exec-1] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:01:55.808 [http-nio-8090-exec-6] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:01:55.812 [http-nio-8090-exec-1] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:01:55.808 [http-nio-8090-exec-5] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:01:55.813 [http-nio-8090-exec-5] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:01:55.812 [http-nio-8090-exec-6] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:01:55.808 [http-nio-8090-exec-3] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=19, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=43, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=24, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=32, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:01:55.813 [http-nio-8090-exec-3] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:01:55.891 [http-nio-8090-exec-7] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:01:55.921 [http-nio-8090-exec-1] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:7
24-11-26.15:01:55.924 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:7
24-11-26.15:01:55.926 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:7
24-11-26.15:01:55.932 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-1] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-5] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:01:55.932 [http-nio-8090-exec-6] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:01:55.938 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:7
24-11-26.15:01:55.938 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:01:55.938 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:01:55.939 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:01:55.939 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:01:55.939 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:01:55.939 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:01:55.939 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:01:55.939 [http-nio-8090-exec-3] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:01:56.087 [http-nio-8090-exec-4] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1059,"monthCount":1090,"monthCountSurplus":1059,"totalCount":18890,"totalCountSurplus":10021}
24-11-26.15:01:56.104 [http-nio-8090-exec-3] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:01:56.104 [http-nio-8090-exec-6] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:01:56.104 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:01:56.104 [http-nio-8090-exec-1] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:01:56.106 [http-nio-8090-exec-2] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:01:56.107 [http-nio-8090-exec-7] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8869},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8869},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8869},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8869}],"info":"成功"}
24-11-26.15:01:56.122 [http-nio-8090-exec-9] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:01:56.135 [http-nio-8090-exec-8] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:01:56.162 [http-nio-8090-exec-2] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1059,"monthCount":1090,"monthCountSurplus":1059,"totalCount":18890,"totalCountSurplus":10021}
24-11-26.15:01:56.172 [http-nio-8090-exec-9] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8869},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8869},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8869},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8869}],"info":"成功"}
24-11-26.15:02:03.386 [http-nio-8090-exec-10] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.15:02:03.836 [http-nio-8090-exec-10] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:0Ju0ueBmBN5h
24-11-26.15:02:03.878 [http-nio-8090-exec-10] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.15:02:03.903 [http-nio-8090-exec-10] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.15:02:03.903 [http-nio-8090-exec-10] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:02:03.918 [http-nio-8090-exec-10] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:02:04.003 [http-nio-8090-exec-10] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 103
24-11-26.15:02:04.006 [http-nio-8090-exec-10] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 103 default
24-11-26.15:02:04.006 [http-nio-8090-exec-10] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.15:02:04.063 [http-nio-8090-exec-10] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 103
24-11-26.15:02:04.226 [http-nio-8090-exec-10] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-11-26.15:02:04.227 [http-nio-8090-exec-10] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 103 null
24-11-26.15:02:04.494 [http-nio-8090-exec-10] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"88277871151","timestamp":"2024-11-26 15:02:04.308"}
24-11-26.15:02:04.515 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"88277871151","timestamp":"2024-11-26 15:02:04.308"}
24-11-26.15:02:16.379 [http-nio-8090-exec-17] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.15:02:16.726 [http-nio-8090-exec-17] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:xmGPGVjPM3Mx
24-11-26.15:02:16.760 [http-nio-8090-exec-17] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.15:02:16.776 [http-nio-8090-exec-17] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.15:02:16.777 [http-nio-8090-exec-17] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:02:16.793 [http-nio-8090-exec-17] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:02:16.837 [http-nio-8090-exec-17] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 108
24-11-26.15:02:16.837 [http-nio-8090-exec-17] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 108 default
24-11-26.15:02:16.837 [http-nio-8090-exec-17] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.15:02:16.864 [http-nio-8090-exec-17] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 108
24-11-26.15:02:16.912 [http-nio-8090-exec-17] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-11-26.15:02:16.912 [http-nio-8090-exec-17] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 108 null
24-11-26.15:02:17.108 [http-nio-8090-exec-17] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":108,"awardTitle":"暴走玩偶","userId":"xiaofuge"},"id":"18690756737","timestamp":"2024-11-26 15:02:16.963"}
24-11-26.15:02:17.110 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":108,"awardTitle":"暴走玩偶","userId":"xiaofuge"},"id":"18690756737","timestamp":"2024-11-26 15:02:16.963"}
24-11-26.15:04:16.089 [http-nio-8090-exec-19] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:04:16.089 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:04:16.093 [http-nio-8090-exec-22] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:04:16.093 [http-nio-8090-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:04:16.129 [http-nio-8090-exec-24] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:04:16.129 [http-nio-8090-exec-23] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:04:16.226 [http-nio-8090-exec-24] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1057,"monthCount":1090,"monthCountSurplus":1057,"totalCount":18890,"totalCountSurplus":10019}
24-11-26.15:04:16.240 [http-nio-8090-exec-23] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1057,"monthCount":1090,"monthCountSurplus":1057,"totalCount":18890,"totalCountSurplus":10019}
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:9
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:04:16.240 [http-nio-8090-exec-20] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:04:16.246 [http-nio-8090-exec-27] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:9
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:04:16.255 [http-nio-8090-exec-21] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:04:16.256 [http-nio-8090-exec-21] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:04:16.257 [http-nio-8090-exec-26] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:04:16.260 [http-nio-8090-exec-28] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:9
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:04:16.263 [http-nio-8090-exec-19] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:04:16.270 [http-nio-8090-exec-49] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:04:16.279 [http-nio-8090-exec-22] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:9
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:04:16.280 [http-nio-8090-exec-22] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:04:16.724 [http-nio-8090-exec-27] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8871},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8871},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8871},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8871}],"info":"成功"}
24-11-26.15:04:16.724 [http-nio-8090-exec-28] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8871},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8871},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8871},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8871}],"info":"成功"}
24-11-26.15:04:27.975 [http-nio-8090-exec-35] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
24-11-26.15:04:28.208 [http-nio-8090-exec-35] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:04:28.208 [http-nio-8090-exec-35] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:04:28.277 [http-nio-8090-exec-35] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_101,库存：100，
24-11-26.15:04:28.278 [http-nio-8090-exec-35] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：101，库存：100，缓存key：strategy_award_count_key_100006_101
24-11-26.15:04:28.306 [http-nio-8090-exec-35] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_102,库存：100，
24-11-26.15:04:28.306 [http-nio-8090-exec-35] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：102，库存：100，缓存key：strategy_award_count_key_100006_102
24-11-26.15:04:28.332 [http-nio-8090-exec-35] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_103,库存：100，
24-11-26.15:04:28.332 [http-nio-8090-exec-35] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：103，库存：100，缓存key：strategy_award_count_key_100006_103
24-11-26.15:04:28.359 [http-nio-8090-exec-35] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_104,库存：100，
24-11-26.15:04:28.359 [http-nio-8090-exec-35] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：104，库存：100，缓存key：strategy_award_count_key_100006_104
24-11-26.15:04:28.396 [http-nio-8090-exec-35] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_105,库存：100，
24-11-26.15:04:28.396 [http-nio-8090-exec-35] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：105，库存：100，缓存key：strategy_award_count_key_100006_105
24-11-26.15:04:28.431 [http-nio-8090-exec-35] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_106,库存：100，
24-11-26.15:04:28.431 [http-nio-8090-exec-35] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：106，库存：100，缓存key：strategy_award_count_key_100006_106
24-11-26.15:04:28.468 [http-nio-8090-exec-35] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_107,库存：100，
24-11-26.15:04:28.468 [http-nio-8090-exec-35] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：107，库存：100，缓存key：strategy_award_count_key_100006_107
24-11-26.15:04:28.499 [http-nio-8090-exec-35] INFO  StrategyRepository     - 策略奖品库存初始化成功 缓存key：strategy_award_count_key_100006_108,库存：100，
24-11-26.15:04:28.499 [http-nio-8090-exec-35] INFO  StrategyArmoryDispatch - 策略奖品库存初始化成功，策略ID：100006，奖品ID：108，库存：100，缓存key：strategy_award_count_key_100006_108
24-11-26.15:04:28.662 [http-nio-8090-exec-35] INFO  RaffleActivityController - 活动装配，数据预热，完成 activityId:100301
24-11-26.15:04:45.286 [http-nio-8090-exec-36] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.15:04:45.614 [http-nio-8090-exec-36] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:Q19mcDZNiBHg
24-11-26.15:04:45.644 [http-nio-8090-exec-36] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.15:04:45.658 [http-nio-8090-exec-36] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.15:04:45.658 [http-nio-8090-exec-36] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:04:45.673 [http-nio-8090-exec-36] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:04:45.712 [http-nio-8090-exec-36] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 101
24-11-26.15:04:45.712 [http-nio-8090-exec-36] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 101 default
24-11-26.15:04:45.712 [http-nio-8090-exec-36] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.15:04:45.821 [http-nio-8090-exec-36] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 101
24-11-26.15:04:45.863 [http-nio-8090-exec-36] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-11-26.15:04:45.863 [http-nio-8090-exec-36] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 101 null
24-11-26.15:04:46.038 [http-nio-8090-exec-36] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"37989108136","timestamp":"2024-11-26 15:04:45.904"}
24-11-26.15:04:46.043 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":101,"awardTitle":"随机积分","userId":"xiaofuge"},"id":"37989108136","timestamp":"2024-11-26 15:04:45.904"}
24-11-26.15:07:16.537 [http-nio-8090-exec-38] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:07:16.537 [http-nio-8090-exec-39] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:07:16.540 [http-nio-8090-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:07:16.541 [http-nio-8090-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:07:16.588 [http-nio-8090-exec-42] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:07:16.590 [http-nio-8090-exec-40] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:07:16.590 [http-nio-8090-exec-40] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:07:16.590 [http-nio-8090-exec-41] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:07:16.590 [http-nio-8090-exec-41] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:07:16.590 [http-nio-8090-exec-39] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:07:16.590 [http-nio-8090-exec-38] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:07:16.590 [http-nio-8090-exec-38] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:07:16.590 [http-nio-8090-exec-39] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:07:16.621 [http-nio-8090-exec-43] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:07:16.624 [http-nio-8090-exec-44] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:07:16.634 [http-nio-8090-exec-40] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:10
24-11-26.15:07:16.635 [http-nio-8090-exec-39] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:10
24-11-26.15:07:16.635 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:07:16.635 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:07:16.635 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:07:16.635 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:07:16.635 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:07:16.635 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:07:16.635 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:07:16.635 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:07:16.635 [http-nio-8090-exec-39] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:07:16.637 [http-nio-8090-exec-39] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:07:16.637 [http-nio-8090-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:07:16.637 [http-nio-8090-exec-39] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:07:16.637 [http-nio-8090-exec-39] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:07:16.637 [http-nio-8090-exec-39] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:07:16.637 [http-nio-8090-exec-39] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:07:16.637 [http-nio-8090-exec-39] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:07:16.637 [http-nio-8090-exec-39] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:07:16.637 [http-nio-8090-exec-39] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:10
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:07:16.638 [http-nio-8090-exec-41] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:07:16.642 [http-nio-8090-exec-45] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:07:16.642 [http-nio-8090-exec-47] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:10
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:07:16.642 [http-nio-8090-exec-38] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:07:16.664 [http-nio-8090-exec-46] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:07:16.665 [http-nio-8090-exec-42] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1056,"monthCount":1090,"monthCountSurplus":1056,"totalCount":18890,"totalCountSurplus":10018}
24-11-26.15:07:16.681 [http-nio-8090-exec-44] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8872},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8872},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8872},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8872}],"info":"成功"}
24-11-26.15:07:16.709 [http-nio-8090-exec-45] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1056,"monthCount":1090,"monthCountSurplus":1056,"totalCount":18890,"totalCountSurplus":10018}
24-11-26.15:07:16.710 [http-nio-8090-exec-47] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8872},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8872},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8872},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8872}],"info":"成功"}
24-11-26.15:07:34.735 [http-nio-8090-exec-6] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.15:07:35.043 [http-nio-8090-exec-6] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:GKM3t2pC9ChU
24-11-26.15:07:35.078 [http-nio-8090-exec-6] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.15:07:35.094 [http-nio-8090-exec-6] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.15:07:35.094 [http-nio-8090-exec-6] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:07:35.111 [http-nio-8090-exec-6] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:07:35.163 [http-nio-8090-exec-6] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 103
24-11-26.15:07:35.163 [http-nio-8090-exec-6] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 103 default
24-11-26.15:07:35.163 [http-nio-8090-exec-6] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.15:07:35.207 [http-nio-8090-exec-6] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 103
24-11-26.15:07:35.245 [http-nio-8090-exec-6] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-11-26.15:07:35.245 [http-nio-8090-exec-6] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 103 null
24-11-26.15:07:35.410 [http-nio-8090-exec-6] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"87194272108","timestamp":"2024-11-26 15:07:35.286"}
24-11-26.15:07:35.412 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"87194272108","timestamp":"2024-11-26 15:07:35.286"}
24-11-26.15:07:35.449 [http-nio-8090-exec-7] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:07:35.451 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:07:35.496 [http-nio-8090-exec-7] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1055,"monthCount":1090,"monthCountSurplus":1055,"totalCount":18890,"totalCountSurplus":10017}
24-11-26.15:07:35.524 [http-nio-8090-exec-5] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8873},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8873},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8873},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8873}],"info":"成功"}
24-11-26.15:07:38.001 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:07:38.048 [http-nio-8090-exec-8] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:07:38.048 [http-nio-8090-exec-8] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:11
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:07:38.098 [http-nio-8090-exec-8] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:10:07.868 [http-nio-8090-exec-10] INFO  RaffleActivityController - 活动抽奖 userId:xiaofuge activityId:100301
24-11-26.15:10:08.211 [http-nio-8090-exec-10] INFO  RaffleActivityController - 活动抽奖，创建订单 userId:xiaofuge activityId:100301 orderId:wTzu2yqFb8Dx
24-11-26.15:10:08.241 [http-nio-8090-exec-10] INFO  BackListLogicChain     - 抽奖责任链-黑名单开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_blacklist
24-11-26.15:10:08.261 [http-nio-8090-exec-10] INFO  BackListLogicChain     - 抽奖责任链-黑名单放行userId:xiaofuge strategyId:100006 ruleModel:rule_blacklist 
24-11-26.15:10:08.261 [http-nio-8090-exec-10] INFO  RuleWeightLogicChain   - 抽奖责任链-权重规则开始 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:10:08.280 [http-nio-8090-exec-10] INFO  RuleWeightLogicChain   - 抽奖责任链-权重放行 userId: xiaofuge strategyId: 100006 ruleModel: rule_weight
24-11-26.15:10:08.325 [http-nio-8090-exec-10] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: xiaofuge strategyId: 100006 ruleModel: default awardId: 103
24-11-26.15:10:08.325 [http-nio-8090-exec-10] INFO  AbstractRaffleStrategy - 责任链100006 xiaofuge 103 default
24-11-26.15:10:08.325 [http-nio-8090-exec-10] INFO  AbstractRaffleStrategy - DefaultChainFactory.LogicModel.RULE_DEFAULT:RULE_DEFAULT
24-11-26.15:10:08.356 [http-nio-8090-exec-10] INFO  RuleStockLogicTreeNode - 库存节点xiaofuge 100006 103
24-11-26.15:10:08.398 [http-nio-8090-exec-10] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】treeId:tree_luck_award node:rule_stock code:0001
24-11-26.15:10:08.398 [http-nio-8090-exec-10] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 xiaofuge 100006 103 null
24-11-26.15:10:08.555 [http-nio-8090-exec-10] INFO  EventPublisher         - 发送消息成功 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"07671722219","timestamp":"2024-11-26 15:10:08.416"}
24-11-26.15:10:08.558 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardId":103,"awardTitle":"支付优惠券","userId":"xiaofuge"},"id":"07671722219","timestamp":"2024-11-26 15:10:08.416"}
24-11-26.15:10:08.599 [http-nio-8090-exec-16] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:10:08.600 [http-nio-8090-exec-11] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:10:08.651 [http-nio-8090-exec-16] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1054,"monthCount":1090,"monthCountSurplus":1054,"totalCount":18890,"totalCountSurplus":10016}
24-11-26.15:10:08.660 [http-nio-8090-exec-11] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8874}],"info":"成功"}
24-11-26.15:10:11.154 [http-nio-8090-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:10:11.215 [http-nio-8090-exec-13] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:10:11.215 [http-nio-8090-exec-13] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:10:11.278 [http-nio-8090-exec-13] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:10:11.279 [http-nio-8090-exec-13] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:12:45.511 [http-nio-8090-exec-32] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:12:45.514 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:12:45.516 [http-nio-8090-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:12:45.516 [http-nio-8090-exec-18] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:12:45.554 [http-nio-8090-exec-23] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:12:45.554 [http-nio-8090-exec-20] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:12:45.556 [http-nio-8090-exec-32] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:12:45.556 [http-nio-8090-exec-32] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:12:45.565 [http-nio-8090-exec-17] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:12:45.565 [http-nio-8090-exec-17] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:12:45.565 [http-nio-8090-exec-24] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:12:45.565 [http-nio-8090-exec-24] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:12:45.565 [http-nio-8090-exec-18] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:12:45.565 [http-nio-8090-exec-18] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:12:45.594 [http-nio-8090-exec-32] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:12:45.596 [http-nio-8090-exec-24] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:12:45.599 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-18] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-18] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-18] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:12:45.622 [http-nio-8090-exec-21] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:12:45.622 [http-nio-8090-exec-17] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:12:45.622 [http-nio-8090-exec-18] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:12:45.623 [http-nio-8090-exec-18] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:12:45.623 [http-nio-8090-exec-18] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:12:45.623 [http-nio-8090-exec-18] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:12:45.623 [http-nio-8090-exec-18] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:12:45.623 [http-nio-8090-exec-18] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:12:45.623 [http-nio-8090-exec-18] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:12:45.627 [http-nio-8090-exec-49] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:12:45.637 [http-nio-8090-exec-20] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1054,"monthCount":1090,"monthCountSurplus":1054,"totalCount":18890,"totalCountSurplus":10016}
24-11-26.15:12:45.637 [http-nio-8090-exec-23] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1054,"monthCount":1090,"monthCountSurplus":1054,"totalCount":18890,"totalCountSurplus":10016}
24-11-26.15:12:45.653 [http-nio-8090-exec-26] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8874}],"info":"成功"}
24-11-26.15:12:45.656 [http-nio-8090-exec-19] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:12:45.679 [http-nio-8090-exec-49] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8874}],"info":"成功"}
24-11-26.15:18:30.790 [http-nio-8090-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:18:30.790 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:18:30.793 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:18:30.793 [http-nio-8090-exec-44] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:18:30.822 [http-nio-8090-exec-39] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:18:30.822 [http-nio-8090-exec-41] INFO  RaffleActivityController - 查询用户是否完成日历签到返利完成 userId:xiaofuge orders.size:2
24-11-26.15:18:30.827 [http-nio-8090-exec-47] INFO  RaffleActivityController - 查询用户活动账户 userId:xiaofuge activityId:100301
24-11-26.15:18:30.827 [http-nio-8090-exec-45] INFO  RaffleStrategyController - 查询抽奖奖品列表配置开始userId:xiaofuge,activityId:100301
24-11-26.15:18:30.834 [http-nio-8090-exec-40] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:18:30.835 [http-nio-8090-exec-40] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:18:30.835 [http-nio-8090-exec-42] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:18:30.836 [http-nio-8090-exec-42] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:18:30.835 [http-nio-8090-exec-43] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:18:30.836 [http-nio-8090-exec-43] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:18:30.861 [http-nio-8090-exec-44] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1054,"monthCount":1090,"monthCountSurplus":1054,"totalCount":18890,"totalCountSurplus":10016}
24-11-26.15:18:30.862 [http-nio-8090-exec-45] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities：[StrategyAwardEntity(strategyId=null, awardId=101, awardTitle=随机积分, awardSubtitle=null, awardCount=100, awardCountSurplus=61, awardRate=0.0200, sort=1, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=102, awardTitle=OpenAI会员卡, awardSubtitle=null, awardCount=100, awardCountSurplus=16, awardRate=0.0300, sort=2, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=103, awardTitle=支付优惠券, awardSubtitle=null, awardCount=100, awardCountSurplus=42, awardRate=0.0300, sort=3, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=104, awardTitle=小米台灯, awardSubtitle=null, awardCount=100, awardCountSurplus=36, awardRate=0.0300, sort=4, ruleModels=tree_luck_award), StrategyAwardEntity(strategyId=null, awardId=105, awardTitle=小米su7周体验, awardSubtitle=抽奖3次后解锁, awardCount=100, awardCountSurplus=38, awardRate=0.0300, sort=5, ruleModels=tree_lock_3), StrategyAwardEntity(strategyId=null, awardId=106, awardTitle=轻奢办公椅, awardSubtitle=抽奖2次后解锁, awardCount=100, awardCountSurplus=25, awardRate=0.0300, sort=6, ruleModels=tree_lock_2), StrategyAwardEntity(strategyId=null, awardId=107, awardTitle=小霸王游戏机, awardSubtitle=抽奖1次后解锁, awardCount=100, awardCountSurplus=22, awardRate=0.0300, sort=7, ruleModels=tree_lock_1), StrategyAwardEntity(strategyId=null, awardId=108, awardTitle=暴走玩偶, awardSubtitle=null, awardCount=100, awardCountSurplus=31, awardRate=0.0300, sort=8, ruleModels=tree_luck_award)]
24-11-26.15:18:30.862 [http-nio-8090-exec-45] INFO  StrategyRepository     - 从缓存中获取策略奖品: strategiesAwardEntities的类型：class java.util.ArrayList
24-11-26.15:18:30.865 [http-nio-8090-exec-48] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-42] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:18:30.878 [http-nio-8090-exec-40] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:18:30.882 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖策略权重规则开始userId:xiaofuge,activityId:100301
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:18:30.894 [http-nio-8090-exec-45] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖今天抽奖次数配置完成userId:xiaofuge,activityId:100301 userTodayPartakeCount:12
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId101--isAwardUnlock:true
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId102--isAwardUnlock:true
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId103--isAwardUnlock:true
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId104--isAwardUnlock:true
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId105--isAwardUnlock:true
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId106--isAwardUnlock:true
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId107--isAwardUnlock:true
24-11-26.15:18:30.897 [http-nio-8090-exec-43] INFO  RaffleStrategyController - !!!!!!AwardId108--isAwardUnlock:true
24-11-26.15:18:30.898 [http-nio-8090-exec-43] INFO  RaffleStrategyController - 查询抽奖奖品列表配置完成userId:xiaofuge,activityId:100301 response:{"code":"0000","data":[{"awardId":101,"awardTitle":"随机积分","awardUnlock":true,"sort":1,"waitUnlockCount":0},{"awardId":102,"awardTitle":"OpenAI会员卡","awardUnlock":true,"sort":2,"waitUnlockCount":0},{"awardId":103,"awardTitle":"支付优惠券","awardUnlock":true,"sort":3,"waitUnlockCount":0},{"awardId":104,"awardTitle":"小米台灯","awardUnlock":true,"sort":4,"waitUnlockCount":0},{"awardId":105,"awardRuleLockCount":3,"awardSubtitle":"抽奖3次后解锁","awardTitle":"小米su7周体验","awardUnlock":true,"sort":5,"waitUnlockCount":0},{"awardId":106,"awardRuleLockCount":2,"awardSubtitle":"抽奖2次后解锁","awardTitle":"轻奢办公椅","awardUnlock":true,"sort":6,"waitUnlockCount":0},{"awardId":107,"awardRuleLockCount":1,"awardSubtitle":"抽奖1次后解锁","awardTitle":"小霸王游戏机","awardUnlock":true,"sort":7,"waitUnlockCount":0},{"awardId":108,"awardTitle":"暴走玩偶","awardUnlock":true,"sort":8,"waitUnlockCount":0}],"info":"成功"}
24-11-26.15:18:30.915 [http-nio-8090-exec-47] INFO  RaffleActivityController - 查询用户活动账户开始 userId:xiaofuge activityId:100301 dto:{"dayCount":1090,"dayCountSurplus":1054,"monthCount":1090,"monthCountSurplus":1054,"totalCount":18890,"totalCountSurplus":10016}
24-11-26.15:18:30.916 [http-nio-8090-exec-48] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8874}],"info":"成功"}
24-11-26.15:18:30.931 [http-nio-8090-exec-25] INFO  RaffleStrategyController - 查询抽奖策略权重规则配置完成 userId:xiaofuge activityId：100301 response: {"code":"0000","data":[{"ruleWeightCount":4000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":60,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":5000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"}],"userActivityAccountTotalUseCount":8874},{"ruleWeightCount":6000,"strategyAwards":[{"awardId":102,"awardTitle":"OpenAI会员卡"},{"awardId":103,"awardTitle":"支付优惠券"},{"awardId":104,"awardTitle":"小米台灯"},{"awardId":105,"awardTitle":"小米su7周体验"},{"awardId":106,"awardTitle":"轻奢办公椅"},{"awardId":107,"awardTitle":"小霸王游戏机"},{"awardId":108,"awardTitle":"暴走玩偶"}],"userActivityAccountTotalUseCount":8874}],"info":"成功"}
24-11-26.15:30:26.230 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=7m433ms514µs200ns).
24-11-26.15:30:26.230 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=7m432ms712µs600ns).
24-11-26.15:32:05.089 [scheduling-1    ] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1cc42516 (Communications link failure

The last packet successfully received from the server was 1,807,525 milliseconds ago. The last packet sent successfully to the server was 1,807,573 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
24-11-26.15:38:53.670 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.15:38:53.676 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.15:38:53.679 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-11-26.15:38:54.100 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.15:38:54.457 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.15:38:54.581 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-11-26.15:38:54.758 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.15:38:54.759 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-11-26.15:38:54.759 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
